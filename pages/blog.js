import Head from 'next/head';
import Link from 'next/link';
import Image from 'next/image';
import { getAllPosts } from '../lib/data';

const Blog = ({ posts }) => {

    return (
        <>

        <Head>
        <title>Blog | Spotlight Media</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
        </Head>

         {/* Full Screen Header */}
         <div className="relative bg-home-header bg-cover text-white w-full z-0 pt-24">
            {/* Overlay */}
            <div className="absolute w-full h-screen bg-black opacity-50 z-0">
            </div>

            {/* Hero Text Wrapper */}
            <div className="flex flex-col items-start z-20 h-60 justify-end pb-16">

            <div className="container mx-auto z-20 motion-safe:animate-fadeSlideUp">
                <h6 className="tracking-wider text-yellow text-left uppercase font-normal z-20">
                Blog
                </h6>

                <h1 className="w-4/5 leading-tight text-white text-left z-20">
                What we're up to
                </h1>
            </div>

            </div>
        </div>
        
        {/* Blog Section */}
        <div className="relative bg-gray-100 w-full">
            <div className="container mx-auto py-20 text-left">

                <div className="flex items-start -m-2 flex-wrap justify-between xs:mx-4">
                    
                    { posts.map((item) => (
                        <div className="sm:w-48pc md:w-32pc bg-white shadow-sm mb-8" key={item.slug}>
                            <Link href={`/blog/${item.slug}`}>
                                <a>
                                    {/* <Image
                                    src={item.img}
                                    width={1080}
                                    height={680}
                                    /> */}
                                </a>
                            </Link>

                            <div className="py-4 px-6">
                            <Link href={`/blog/${item.slug}`}>
                                <a><h4>{item.title}</h4></a>
                            </Link>
                            <p className="font-bold">{item.date}</p>
                            <p>{item.content.substring(1, 200)}</p>
                            <Link href={`/blog/${item.slug}`}>
                                <button className="btn-yellow-2-sm">Read more</button>
                            </Link>
                            </div>

                        </div>  
                    ))}

                </div>

            </div>
        </div>

        {/* Work with us Section */}
        <div className="relative bg-gray-100 w-full">
            <div className="container mx-auto py-20 text-left">
            <h2 className="text-black mb-8">Want to join the team?</h2>
            <p className="text-black font-bold text-lg mb-8">We work with freelance contractors around the country.</p>
            <p className="text-black text-lg mb-8">If youâ€™re a skilled videographer, graphic designer or web developer then click below to send your CV or showreel.</p>
            <button className="btn-yellow-2 mr-4">Contact us</button>
            </div>
        </div>
        
        </>
    )
}

export async function getStaticProps() {

    const allPosts = getAllPosts()

    return {
      props: {
          posts: allPosts.map(({data, content, slug}) => ({
            ...data,
            content,
            slug
          }))
      }
    }
  }

export default Blog;